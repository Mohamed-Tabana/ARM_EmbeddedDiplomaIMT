
#include "SPI_int.h"
#include "Utils.h"

void SPI_vInit()
{
	/*1- CPHA and CPOL CFG*/
	SET_BIT(SPI->SPI_CR1,CPHA);
	SET_BIT(SPI->SPI_CR1,CPOL);
	/*2- select Master*/
	SET_BIT(SPI->SPI_CR1,MSTR);
	/*3- CFG BaudRate*/
	SPI->SPI_CR1 &= ~(0b111 << SPI_BR0);
	SPI->SPI_CR1 &= ~(0b010 << SPI_BR0);




	/*3- SPI Enable*/
	SET_BIT(SPI->SPI_CR1,SPE);


}
uint16_t SPI_Transceiving(uint16_t copy_u16Data)
{

	while(READ_BIT(SPI->SPI_SR,BSY));
	SPI->SPI_DR=copy_u16Data;
	while(READ_BIT(SPI->SPI_SR,BSY));

	return SPI->SPI_DR;
}
